<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üè• Community Guardian | Healthcare API Monitor</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css">
    <link rel="stylesheet" href="/static_advanced/monitor.css">
</head>
<body>
    <button id="themeToggleBtn" class="theme-toggle" aria-label="Toggle dark mode">
        <i class="ri-sun-line"></i>
    </button>

    <div class="dashboard-grid">
        <header class="panel panel-header">
            <div class="header-top">
                <h1>
                    <i class="ri-hospital-line"></i>
                    Community Guardian
                    <span class="subtitle">Healthcare & Emergency API Monitor</span>
                </h1>
                <div class="header-actions">
                    <button id="warRoomBtn" class="button-emergency">
                        <i class="ri-emergency-line"></i>
                        <span>War Room</span>
                    </button>
                    <a href="/" class="button-secondary">
                        <i class="ri-dashboard-line"></i>
                        <span>Simple Monitor</span>
                    </a>
                </div>
            </div>
            
            <section class="stats-section">
                <div class="stat-card critical">
                    <div class="stat-icon">üö®</div>
                    <div class="stat-info">
                        <div class="stat-value" id="criticalCount">0</div>
                        <div class="stat-label">Critical APIs</div>
                    </div>
                </div>
                <div class="stat-card high">
                    <div class="stat-icon">‚öïÔ∏è</div>
                    <div class="stat-info">
                        <div class="stat-value" id="highCount">0</div>
                        <div class="stat-label">High Priority</div>
                    </div>
                </div>
                <div class="stat-card success">
                    <div class="stat-icon">‚úÖ</div>
                    <div class="stat-info">
                        <div class="stat-value" id="uptimePercent">0%</div>
                        <div class="stat-label">System Uptime</div>
                    </div>
                </div>
                <div class="stat-card warning">
                    <div class="stat-icon">‚ö†Ô∏è</div>
                    <div class="stat-info">
                        <div class="stat-value" id="activeIncidentsCount">0</div>
                        <div class="stat-label">Active Incidents</div>
                    </div>
                </div>
            </section>
        </header>

        <main class="panel panel-main" id="mainView">
            <div class="panel-header">
                <h2>
                    <i class="ri-pulse-line"></i>
                    Healthcare API Monitoring
                </h2>
                <div class="panel-actions">
                    <button id="warRoomBtn" class="button-secondary">
                        <i class="ri-flag-line"></i>
                        <span>War Room</span>
                    </button>
                    <button id="settingsBtn" class="button-secondary">
                        <i class="ri-settings-3-line"></i>
                        <span>Settings</span>
                    </button>
                    <button id="addApiBtn" class="button-primary">
                        <i class="ri-add-line"></i>
                        <span>Add Healthcare API</span>
                    </button>
                </div>
            </div>
            
            <div class="monitor-list" id="monitorList">
                <!-- Monitor cards will be populated here -->
            </div>
        </main> <!-- End of mainView -->

        <aside class="panel panel-sidebar">
            <div class="panel-header">
                <h3>
                    <i class="ri-notification-3-line"></i>
                    Activity Timeline
                </h3>
                <button id="refreshTimeline" class="button-icon">
                    <i class="ri-refresh-line"></i>
                </button>
            </div>
            
            <div class="timeline-container">
                <div id="activityTimeline" class="activity-timeline">
                    <!-- Timeline items will be populated here -->
                </div>
            </div>
        </aside>
    </div>

    <!-- Settings Panel -->
    <div id="settingsPanel" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="ri-settings-3-line"></i> Guardian Settings</h2>
                <button id="closeSettingsPanel" class="button-icon">
                    <i class="ri-close-line"></i>
                </button>
            </div>
            <div class="modal-body">
                
                <!-- Healthcare API Categories -->
                <section class="settings-section">
                    <h3><i class="ri-hospital-line"></i> Healthcare API Categories</h3>
                    <div class="category-grid">
                        <div class="category-card critical">
                            <h4>üö® Critical Priority</h4>
                            <p>Emergency Dispatch, Life Support, Emergency Alerts</p>
                            <span class="impact-badge">Impact: 90-100</span>
                        </div>
                        <div class="category-card high">
                            <h4>‚öïÔ∏è High Priority</h4>
                            <p>Hospital Operations, Telemedicine, Vaccination</p>
                            <span class="impact-badge">Impact: 70-89</span>
                        </div>
                        <div class="category-card medium">
                            <h4>üìã Support Services</h4>
                            <p>Health Records, Supply Chain, Public Health</p>
                            <span class="impact-badge">Impact: 50-69</span>
                        </div>
                    </div>
                </section>

                <!-- Emergency Contacts -->
                <section class="settings-section">
                    <div class="section-header">
                        <h3><i class="ri-phone-line"></i> Emergency Response Contacts</h3>
                        <button id="addContactBtn" class="button-secondary">Add Contact</button>
                    </div>
                    <form id="contactForm" class="contact-form">
                        <div class="form-grid">
                            <input type="text" id="contactName" placeholder="Contact Name" required>
                            <input type="tel" id="contactPhone" placeholder="Phone Number">
                            <input type="email" id="contactEmail" placeholder="Email Address">
                            <select id="contactRole">
                                <option value="emergency_coordinator">Emergency Coordinator</option>
                                <option value="hospital_admin">Hospital Administrator</option>
                                <option value="it_support">IT Support</option>
                                <option value="ngo_staff">NGO Staff</option>
                                <option value="health_worker">Health Worker</option>
                            </select>
                            <select id="contactLanguage">
                                <option value="EN">English</option>
                                <option value="TA">Tamil</option>
                                <option value="HI">Hindi</option>
                                <option value="ES">Spanish</option>
                                <option value="FR">French</option>
                            </select>
                        </div>
                        <div class="api-selection">
                            <label>Select APIs to monitor for this contact:</label>
                            <div id="apiCheckboxes" class="api-checkboxes">
                                <!-- API checkboxes will be populated here -->
                            </div>
                        </div>
                        <div class="alert-preferences">
                            <label>
                                <input type="checkbox" id="smsAlerts" checked>
                                <span>SMS Alerts</span>
                            </label>
                            <label>
                                <input type="checkbox" id="whatsappAlerts" checked>
                                <span>WhatsApp Alerts</span>
                            </label>
                            <label>
                                <input type="checkbox" id="ivrAlerts">
                                <span>IVR Voice Calls</span>
                            </label>
                        </div>
                        <button type="submit" class="button-primary">Save Emergency Contact</button>
                    </form>
                    <div class="contact-list">
                        <table class="contact-table">
                            <thead>
                                <tr><th>Name</th><th>Role</th><th>Phone</th><th>Email</th><th>APIs</th><th>Alerts</th><th></th></tr>
                            </thead>
                            <tbody id="contactTableBody"></tbody>
                        </table>
                    </div>
                </section>

                <!-- Alert Channels -->
                <section class="settings-section">
                    <h3><i class="ri-notification-3-line"></i> Emergency Alert Channels</h3>
                    <div class="alert-channels">
                        <div class="channel-config">
                            <label>
                                <input type="checkbox" id="enableSmsAlerts" checked>
                                <span>SMS Alerts (Twilio)</span>
                            </label>
                            <input type="tel" id="emergencySmsNumber" placeholder="+1234567890">
                        </div>
                        <div class="channel-config">
                            <label>
                                <input type="checkbox" id="enableWhatsappAlerts">
                                <span>WhatsApp Business</span>
                            </label>
                            <input type="tel" id="whatsappNumber" placeholder="+1234567890">
                        </div>
                        <div class="channel-config">
                            <label>
                                <input type="checkbox" id="enableIvrAlerts">
                                <span>IVR Voice Calls</span>
                            </label>
                            <input type="tel" id="ivrNumber" placeholder="+1234567890">
                        </div>
                    </div>
                </section>

                <!-- Impact-Based Prioritization -->
                <section class="settings-section">
                    <h3><i class="ri-priority-line"></i> Impact-Based Prioritization</h3>
                    <div class="impact-settings">
                        <div class="impact-threshold">
                            <label>Critical Alert Threshold:</label>
                            <input type="range" id="criticalThreshold" min="70" max="100" value="90">
                            <span id="criticalThresholdValue">90</span>
                        </div>
                        <div class="impact-threshold">
                            <label>High Priority Threshold:</label>
                            <input type="range" id="highThreshold" min="50" max="90" value="75">
                            <span id="highThresholdValue">75</span>
                        </div>
                        <div class="auto-escalation">
                            <label>
                                <input type="checkbox" id="autoEscalation" checked>
                                <span>Auto-escalate critical incidents after 5 minutes</span>
                            </label>
                        </div>
                    </div>
                </section>

                <!-- Language Settings Section -->
                <section class="panel-section">
                    <h3><i class="ri-translate-2" aria-hidden="true"></i> Language Settings</h3>
                    <div class="language-options">
                        <label><input type="radio" name="preferredLanguage" value="EN"> English</label>
                        <label><input type="radio" name="preferredLanguage" value="TA"> Tamil</label>
                        <label><input type="radio" name="preferredLanguage" value="HI"> Hindi</label>
                    </div>
                    <div class="translation-tool">
                        <h4>Translate Sample Message</h4>
                        <textarea id="translateMessage" rows="3" placeholder="Enter alert text..."></textarea>
                        <div class="translation-actions">
                            <button data-lang="EN" class="button-secondary translation-btn">English</button>
                            <button data-lang="TA" class="button-secondary translation-btn">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</button>
                            <button data-lang="HI" class="button-secondary translation-btn">‡§π‡§ø‡§Ç‡§¶‡•Ä</button>
                            <button id="translateClear" class="button-icon" type="button" title="Clear translation output" aria-label="Clear translation output"><i class="ri-refresh-line" aria-hidden="true"></i></button>
                        </div>
                        <div class="translation-output" id="translationOutput">Translation will appear here.</div>
                    </div>
                </section>

                <!-- Notification Activity Section -->
                <section class="panel-section">
                    <h3><i class="ri-time-line" aria-hidden="true"></i> Notification Activity</h3>
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                        <span style="font-size: 0.875rem; color: #8B949E;">Recent email responses and alert deliveries</span>
                        <div style="display: flex; gap: 0.5rem;">
                            <button id="viewTrainingHistory" class="button-secondary"><i class="ri-history-line"></i> AI Training</button>
                            <button id="refreshTimeline" class="button-secondary"><i class="ri-refresh-line"></i> Refresh</button>
                        </div>
                    </div>
                    <div id="notificationTimeline" class="notification-timeline">
                        <p class="placeholder">Loading activity timeline...</p>
                    </div>
                </section>
            </div>
        </div>
    </div>

    <!-- War Room Modal -->
    <div id="warRoomModal" class="modal hidden">
        <div class="modal-content war-room">
            <div class="modal-header">
                <h2>üèõÔ∏è Emergency War Room</h2>
                <button id="closeWarRoom" class="button-icon">
                    <i class="ri-close-line"></i>
                </button>
            </div>
            <div class="war-room-content">
                <aside class="war-room-sidebar">
                    <div class="war-room-hero">
                        <p class="hero-subtitle">Live coordination hub</p>
                        <h3>Coordinated Response Status</h3>
                        <div class="hero-metrics">
                            <div class="hero-metric">
                                <span class="metric-label">Critical</span>
                                <span class="metric-value" id="heroCriticalCount">0</span>
                            </div>
                            <div class="hero-metric">
                                <span class="metric-label">Average Response</span>
                                <span class="metric-value" id="heroResponseEta">--</span>
                            </div>
                            <div class="hero-metric">
                                <span class="metric-label">Stability</span>
                                <span class="metric-value" id="heroStability">--</span>
                            </div>
                        </div>
                        <div class="hero-actions">
                            <button class="button-primary ghost" type="button">Trigger Broadcast</button>
                            <button class="button-secondary" type="button">Assign Task Force</button>
                        </div>
                    </div>
                    <div class="incident-list card">
                        <div class="section-heading">
                            <div>
                                <h3>üö® Active Incidents</h3>
                                <p>Prioritized by impact score</p>
                            </div>
                            <span class="badge" id="warRoomIncidentBadge">0 live</span>
                        </div>
                        <div id="warRoomIncidents" class="incident-scroll"></div>
                    </div>
                    <div class="team-chat card">
                        <div class="section-heading">
                            <div>
                                <h3>üí¨ Field Coordination</h3>
                                <p>Stay aligned with incident leads</p>
                            </div>
                            <div class="chat-presence">
                                <span class="presence-dot"></span> 6 responders online
                            </div>
                        </div>
                        <div id="chatMessages"></div>
                        <div class="chat-input">
                            <input type="text" id="chatInput" placeholder="Type message...">
                            <button id="sendMessage">Send</button>
                        </div>
                    </div>
                    <div class="playbook-card card">
                        <h3>üß∞ Response Playbooks</h3>
                        <ul>
                            <li><span>Restart edge nodes</span><button class="button-link">Run</button></li>
                            <li><span>Escalate to regional lead</span><button class="button-link">Notify</button></li>
                            <li><span>Activate field volunteers</span><button class="button-link">Deploy</button></li>
                        </ul>
                    </div>
                </aside>
                <section class="war-room-main">
                    <div class="war-room-grid">
                        <div class="war-room-card incident-details">
                            <div class="section-heading">
                                <h3>üìä Incident Analysis</h3>
                                <button class="button-icon" type="button" title="Refresh analysis"><i class="ri-refresh-line"></i></button>
                            </div>
                            <div id="incidentAnalysis" class="card-body"></div>
                        </div>
                        <div class="war-room-card what-if-simulator">
                            <div class="section-heading">
                                <h3>üéØ What-If Simulator</h3>
                                <span class="badge ghost">AI Assisted</span>
                            </div>
                            <div id="simulatorControls"></div>
                            <div id="simulatorResults"></div>
                        </div>
                        <div class="war-room-card impact-map">
                            <div class="section-heading">
                                <h3>üó∫Ô∏è Impact Visualization</h3>
                                <button class="button-link" type="button">Export Map</button>
                            </div>
                            <div id="impactMap"></div>
                        </div>
                        <div class="war-room-card response-timeline">
                            <div class="section-heading">
                                <h3>üìç Response Timeline</h3>
                                <button class="button-link" type="button">View full log</button>
                            </div>
                            <div id="warRoomTimeline" class="timeline-list"></div>
                        </div>
                        <div class="war-room-card escalation-panel">
                            <div class="section-heading">
                                <h3>‚ö° Rapid Actions</h3>
                                <span class="badge">Live</span>
                            </div>
                            <div class="action-grid">
                                <button class="action-chip">Open Bridge</button>
                                <button class="action-chip">Ping SRE</button>
                                <button class="action-chip">Notify Hospitals</button>
                                <button class="action-chip">Sync Logistics</button>
                            </div>
                            <p class="panel-note">Actions log automatically into the incident record for audit.</p>
                        </div>
                    </div>
                </section>
            </div>
        </div>
    </div>

    <!-- Add/Edit API Modal -->
    <div id="addApiModal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Add Healthcare API Monitor</h2>
                <button id="modalCloseBtn" class="button-icon">
                    <i class="ri-close-line"></i>
                </button>
            </div>
            <form id="addApiForm">
                <input type="hidden" id="apiEditId">
                <div class="form-group">
                    <label for="apiName">API Name *</label>
                    <input type="text" id="apiName" required placeholder="e.g., City Ambulance Dispatch">
                </div>
                <div class="form-group">
                    <label for="apiUrl">API URL *</label>
                    <input type="url" id="apiUrl" required placeholder="https://api.emergency.gov/ambulance/status">
                </div>
                <div class="form-group">
                    <label for="apiCategory">Healthcare Category *</label>
                    <select id="apiCategory" required>
                        <option value="">Select Category</option>
                        <optgroup label="üö® Critical Priority">
                            <option value="emergency_dispatch">Emergency Dispatch</option>
                            <option value="life_support">Life Support Systems</option>
                            <option value="emergency_alerts">Emergency Alerts</option>
                        </optgroup>
                        <optgroup label="‚öïÔ∏è High Priority">
                            <option value="hospital_operations">Hospital Operations</option>
                            <option value="telemedicine">Telemedicine Services</option>
                            <option value="vaccination">Vaccination Services</option>
                        </optgroup>
                        <optgroup label="üìã Support Services">
                            <option value="health_records">Health Records</option>
                            <option value="supply_chain">Medical Supply Chain</option>
                            <option value="public_health">Public Health Data</option>
                        </optgroup>
                    </select>
                </div>
                <div class="form-group">
                    <label for="apiPriority">Priority Level *</label>
                    <select id="apiPriority" required>
                        <option value="">Select Priority</option>
                        <option value="critical">üö® Critical - Life-saving systems</option>
                        <option value="high">‚öïÔ∏è High - Essential healthcare services</option>
                        <option value="medium">üìã Medium - Support services</option>
                        <option value="low">üìä Low - Analytics and reporting</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="apiImpactScore">Community Impact Score (0-100)</label>
                    <input type="number" id="apiImpactScore" min="0" max="100" placeholder="85">
                    <small>Higher score = greater impact on community if API fails</small>
                </div>
                <div class="form-group">
                    <label for="apiEmergencyContact">Emergency Contact</label>
                    <input type="text" id="apiEmergencyContact" placeholder="dispatch@city.gov">
                </div>
                <div class="form-group">
                    <label for="apiFallbackUrl">Fallback URL (Optional)</label>
                    <input type="url" id="apiFallbackUrl" placeholder="https://backup.emergency.gov/ambulance/status">
                </div>
                <div class="form-group">
                    <label for="apiCheckInterval">Check Interval (seconds)</label>
                    <input type="number" id="apiCheckInterval" min="10" max="3600" value="30">
                </div>
                <div class="form-actions">
                    <button type="button" id="cancelBtn" class="button-secondary">Cancel</button>
                    <button type="submit" id="modalSubmitBtn" class="button-primary">Add Monitor</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Details View -->
    <div id="detailsView" class="details-view hidden">
        <button id="backBtn" class="button-secondary">
            <i class="ri-arrow-left-line"></i> Back to Dashboard
        </button>
        <div id="detailsContent">
            <!-- Details will be populated here -->
        </div>
    </div>
                
                

    <div id="reportModal" class="modal-overlay hidden">
        <div class="modal-content large" id="reportModalContent">
            </div>
    </div>

    <!-- AI Insights Modal -->
    <div id="aiInsightsModal" class="modal-overlay hidden">
        <div class="modal-content large ai-modal">
            <div class="modal-header">
                <h2>ü§ñ AI Insights & Predictions</h2>
                <button id="closeAiModal" class="button-icon">‚úï</button>
            </div>
            <div id="aiInsightsContent" class="ai-insights-content">
                <p class="placeholder">Loading AI predictions...</p>
            </div>
        </div>
    </div>

    <!-- Training History Modal -->
    <div id="trainingHistoryModal" class="modal-overlay hidden">
        <div class="modal-content large ai-modal">
            <div class="modal-header">
                <h2>üìö AI Training History</h2>
                <button id="closeTrainingHistory" class="button-icon">‚úï</button>
            </div>
            <div id="trainingHistoryContent" class="ai-insights-content">
                <p class="placeholder">Loading training history...</p>
            </div>
        </div>
    </div>

    <!-- GitHub Token Help Modal -->
    <div id="tokenHelpModal" class="modal-overlay hidden">
        <div class="modal-content large">
            <div class="modal-header">
                <h2>üîë How to Get GitHub Personal Access Token</h2>
                <button id="closeTokenHelp" class="button-icon">‚úï</button>
            </div>
            <div style="padding: 1.5rem; color: #C9D1D9;">
                <h3 style="color: #58A6FF; margin-top: 0;">Step-by-Step Guide:</h3>
                
                <div style="background: #161B22; padding: 1rem; border-radius: 6px; margin: 1rem 0;">
                    <p style="margin: 0.5rem 0;"><strong>1.</strong> Go to GitHub Settings</p>
                    <p style="margin: 0.5rem 0; padding-left: 1.5rem;">
                        Visit: <a href="https://github.com/settings/tokens" target="_blank" style="color: #58A6FF;">https://github.com/settings/tokens</a>
                    </p>
                </div>

                <div style="background: #161B22; padding: 1rem; border-radius: 6px; margin: 1rem 0;">
                    <p style="margin: 0.5rem 0;"><strong>2.</strong> Generate New Token</p>
                    <p style="margin: 0.5rem 0; padding-left: 1.5rem;">
                        Click <strong>"Generate new token"</strong> ‚Üí Select <strong>"Generate new token (classic)"</strong>
                    </p>
                </div>

                <div style="background: #161B22; padding: 1rem; border-radius: 6px; margin: 1rem 0;">
                    <p style="margin: 0.5rem 0;"><strong>3.</strong> Configure Token</p>
                    <p style="margin: 0.5rem 0; padding-left: 1.5rem;">
                        <strong>Note:</strong> API Monitoring Token<br>
                        <strong>Expiration:</strong> 90 days (or custom)<br>
                        <strong>Scopes:</strong> Check these boxes:
                    </p>
                    <ul style="padding-left: 3rem; margin: 0.5rem 0;">
                        <li>‚úÖ <strong>repo</strong> (Full control of private repositories)</li>
                        <li>‚úÖ <strong>read:org</strong> (Read org and team membership)</li>
                    </ul>
                </div>

                <div style="background: #161B22; padding: 1rem; border-radius: 6px; margin: 1rem 0;">
                    <p style="margin: 0.5rem 0;"><strong>4.</strong> Generate & Copy</p>
                    <p style="margin: 0.5rem 0; padding-left: 1.5rem;">
                        Click <strong>"Generate token"</strong> at the bottom<br>
                        ‚ö†Ô∏è <strong>IMPORTANT:</strong> Copy the token immediately! You won't see it again.
                    </p>
                </div>

                <div style="background: #161B22; padding: 1rem; border-radius: 6px; margin: 1rem 0;">
                    <p style="margin: 0.5rem 0;"><strong>5.</strong> Paste Token Here</p>
                    <p style="margin: 0.5rem 0; padding-left: 1.5rem;">
                        Paste the token in the <strong>"GitHub Personal Access Token"</strong> field above<br>
                        Your token will be securely stored in MongoDB
                    </p>
                </div>

                <div style="background: #1F6FEB; padding: 1rem; border-radius: 6px; margin: 1.5rem 0;">
                    <p style="margin: 0; font-weight: bold;"><i class="ri-lightbulb-line"></i> Pro Tip:</p>
                    <p style="margin: 0.5rem 0 0 0;">
                        Token format looks like: <code style="background: #0D1117; padding: 2px 6px; border-radius: 3px;">ghp_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx</code>
                    </p>
                </div>

                <div style="background: #DA3633; padding: 1rem; border-radius: 6px; margin: 1rem 0;">
                    <p style="margin: 0; font-weight: bold;"><i class="ri-lock-line"></i> Security Note:</p>
                    <p style="margin: 0.5rem 0 0 0;">
                        Never share your token publicly! It's stored securely in your database and masked in the UI.
                    </p>
                </div>
            </div>
        </div>
    </div>
    
    <div id="tooltip" class="tooltip hidden"></div>
    <div id="toastContainer" class="toast-container"></div>

    <!-- Alert Preview Modal -->
    <div id="alertPreviewModal" class="modal-overlay hidden" role="dialog" aria-modal="true" aria-labelledby="alertPreviewTitle">
        <div class="modal-content large">
            <div class="modal-header">
                <h2 id="alertPreviewTitle">üì¢ Community Alert Preview</h2>
                <button id="closeAlertPreview" class="button-icon" type="button" title="Close alert preview" aria-label="Close alert preview">‚úï</button>
            </div>
            <div class="preview-tabs">
                <button class="preview-tab active" data-tab="email">Email</button>
            </div>
            <div id="previewContent" class="preview-content">
                <p class="placeholder">Select a tab to see alert copy.</p>
            </div>
        </div>
    </div>

    <!-- Worker Responses Modal -->
    <div id="workerResponsesModal" class="modal-overlay hidden" role="dialog" aria-modal="true" aria-labelledby="workerResponsesTitle">
        <div class="modal-content large">
            <div class="modal-header">
                <h2 id="workerResponsesTitle">üë• Worker Responses</h2>
                <button id="closeWorkerResponses" class="button-icon" type="button" title="Close worker responses" aria-label="Close worker responses">‚úï</button>
            </div>
            <div class="worker-table-wrapper">
                <table class="worker-table">
                    <thead>
                        <tr><th>Name</th><th>Channel</th><th>Response</th><th>API</th><th>Timestamp</th><th>Status</th></tr>
                    </thead>
                    <tbody id="workerResponsesBody"></tbody>
                </table>
            </div>
            <button id="viewFullTimeline" class="button-primary">View Full Incident Timeline</button>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="/static_advanced/monitor.js"></script>
</body>
</html>